{"version":1,"windowDimensions":{"x":670,"y":0,"width":1250,"height":1200,"maximized":false},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572"],"buffers":[{"id":"47141b095d0a3888ad47e6849b50f8d9","text":"/*========================================\r\n/* LAMP環境セットアップ\r\n/*========================================\r\n基本的にここ参照\r\nhttps://blog.apar.jp/linux/194/\r\n\r\n/*========================================\r\n/* VMware Playerセットアップ\r\n/*========================================\r\n最新のPlayerをインストール\r\nhttps://my.vmware.com/jp/web/vmware/free#desktop_end_user_computing/vmware_player/7_0\r\n\r\n/*========================================\r\n/* CENTOSセットアップ\r\n/*========================================\r\nCentOS7（1503）のisoファイルを以下の公式サイトからダウンロードする。\r\nhttps://www.centos.org/\r\n\r\nVMPlayerにて新規マシンの追加を実行し、上記でダウロードしたisoファイルを指定する。\r\nユーザとパスを設定し、言語は日本語選択、再起動\r\n再起動のコマンド\r\nshutdown -r now\r\n\r\n/*========================================\r\n/* apacheセットアップ\r\n/*========================================\r\n使用version:\r\n\thttpd-devel-2.4.6-31.el7.centos.x86_64.rpm\r\n\r\nインストールコマンド：\r\n\tyum -y install httpd-devel\r\n\r\n/var/www/htmlにhtmlを作成しブラウザから表示されるか確認する。\r\n\thttp://192.168.2.171/index.html\r\n\r\nダメだった場合ファイアーウォールが効いている可能性があるため以下で設定する。\r\nファイアーウォール自体ストップする場合：systemctl stop firewalld.service\r\nファイアーウォールでhttpとhttpsを認証する場合：\r\nfirewall-cmd --add-service=http --zone=public --permanent\r\nfirewall-cmd --add-service=https --zone=public --permanent\r\nfirewall-cmd --reload\r\n\r\n基本は以上\r\n・再起動\r\nhttpd -k restart\r\n\tエラーが出る場合以下のファイルのServerNameを修正する\r\n\t/etc/httpd/conf/httpd.conf\r\n\t「ServerName localhost:80」を追記\r\n\r\n・自動起動設定\r\nsystemctl enable httpd\r\n\r\n/*========================================\r\n/* PHPセットアップ\r\n/*========================================\r\n使用version:\r\n\tPHP本体：php.x86_64 0:5.4.16-23.el7_0.3\r\n\tPHP開発：php-devel.x86_64 0:5.4.16-23.el7_0.3\r\n\tPDO（ファイルアクセスライブラリ）：php-pdo.x86_64 0:5.4.16-23.el7_0.3\r\n\t文字列関係のライブラリ：php-mbstring.x86_64 0:5.4.16-23.el7_0.3\r\n\tmysqlのライブラリ：php-mysql.x86_64 0:5.4.16-23.el7_0.3\r\n\r\nインストールコマンド：\r\n\tyum -y install php\r\n\tyum -y install php-devel\r\n\tyum -y install php-pdo\r\n\tyum -y install php-mbstring\r\n\tyum -y install php-mysql\r\n\r\n/var/www/htmlに以下のファイルを作成しブラウザから表示されるか確認する。\r\n\t/var/www/html/index.php\r\n\t\t<?php\r\n\t\t\techo phpinfo();\r\n\t\t?>\r\n\r\nエラーログの出力設定\r\n①以下で出力先を作成\r\n\tmkdir /var/log/php\r\n\tchown apache /var/log/php\r\n\tchmod 755 /var/log/php\r\n\r\n②php.iniファイルを編集\r\n\terror_log = \"/var/log/php/php_error.log\"\r\n\r\n③httpdの再起動\r\n\r\nエラーログを確認したtimezoneがおかしいと言われたので、php.iniファイルを編集\r\n\tdate.timezone = 'Asia/Tokyo'\r\nhttpd再起動\r\n\r\n\r\nエラーログの確認のためわざと間違えてエラーログを確認したところちゃんとエラーになった。\r\n\r\nindex.phpを省略するには・・・\r\n\t/etc/httpd/conf/httpd.conf\r\n\t\tDirectoryIndex index.php index.html\r\n\tとする。\r\n\r\n\r\n/*========================================\r\n/* mysqlセットアップ\r\n/*========================================\r\ncentosからはmariaDBとなったらしい。。。\r\n設定方法は以下参照\r\n\thttp://www.unix-power.net/centos7/mariadb.html\r\n\r\n使用version:\r\n\tmariadb-5.5.41-2.el7_0.x86_64\r\n\tmariadb-server.x86_64 1:5.5.41-2.el7_0\r\n\tmariadb-devel-5.5.41-2.el7_0.x86_64\r\n\r\nインストールコマンド：\r\n\tyum -y install mariadb\r\n\tyum -y install mariadb-server\r\n\r\n・オリジナルのコンフィグをバックアップします。\r\ncp -i /etc/my.cnf /etc/my.cnf.org\r\n\r\n・コンフィグを作成します。\r\nvi /etc/my.cnf\r\n\t> cahracter-set-server=utf8追加\r\n\r\n・mariadb.serviceのスタート\r\n\t⇒enableは世界の最初のみでOK\r\n\t> systemctl enable mariadb.service\r\n\t> systemctl start mariadb.service\r\n\r\n\r\n＝＝＝＝＝＝＝＝＝＝＝＝mariadbセットアップ\r\n基本的にmysqlと同じ。\r\n\t⇒コマンドも一緒\r\n初期設定\r\n\t> mysql_secure_installation\r\n\t⇒rootのパスワードのみ設定する。\r\n\r\n\r\nユーザの追加\r\n\tやってみましたが、mysqlと同じでした。\r\n\r\nデータベースの作成とsql\r\n\tmysqlと同様のため省略\r\n\r\n・テストsql書くのがで面倒なのphpmyadmin入れる。\r\n\t・標準レポジトリに無かったので、EPELれぽ追加\r\n\t\t> yum install epel-release\r\n\t\t> vi /etc/yum.repos.d/epel.repo\r\n\t\t\t⇒enabled=0からenabled=1に変更\r\n\t・myphpadminをインスコ\r\n\t\tyum --enablerepo=epel -y install phpMyAdmin php-mysql php-mcrypt\r\n\t・http再起動\r\n\t・アクセスして確認\r\n\t\t⇒403が返ってくるはず・・・\r\n\t\t⇒デフォルトではローカルでしか許容していないため。。。\r\n\t\t\t⇒設定を以下で直してhttp再起動\r\n\t\t\t\t⇒vi /etc/httpd/conf.d/phpMyAdmin.conf\r\n\t\t\t\tRequire ip 192.168.1\r\n\t\t\t\t#Require ip 127.0.0.1\r\n\t・再度確認\r\n\r\n\r\n/*========================================\r\n/* PHPでPDO使用し、mysqlのレコードのあれこれできるか確認\r\n/*========================================\r\n\r\n研修時のソースが問題なく動作したため、省略\r\n\r\n\r\n\r\n\r\n\r\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":65,"column":23},"end":{"row":65,"column":23}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"11":{"id":"11","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":12,"history":{"version":3,"nextCheckpointId":20,"undoStack":[{"type":"group-start","snapshot":{"2":{"1":{"range":[[65,23],[65,23]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[65,23],[65,23]],"newRange":[[65,23],[65,24]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[65,24],[65,24]],"newRange":[[65,24],[65,25]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[65,25],[65,25]],"newRange":[[65,25],[65,26]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[65,26],[65,26]],"newRange":[[65,26],[65,27]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[65,27],[65,27]],"newRange":[[65,27],[65,28]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[65,28],[65,28]],"newRange":[[65,28],[65,29]],"oldText":"","newText":"w"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[65,29],[65,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[65,29],[65,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[65,28],[65,29]],"newRange":[[65,28],[65,28]],"oldText":"w","newText":""}},{"type":"change","content":{"oldRange":[[65,27],[65,28]],"newRange":[[65,27],[65,27]],"oldText":"a","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[65,27],[65,27]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[65,27],[65,27]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[65,26],[65,27]],"newRange":[[65,26],[65,26]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[65,25],[65,26]],"newRange":[[65,25],[65,25]],"oldText":"r","newText":""}},{"type":"change","content":{"oldRange":[[65,24],[65,25]],"newRange":[[65,24],[65,24]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[65,24],[65,24]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[65,24],[65,24]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[65,23],[65,24]],"newRange":[[65,23],[65,23]],"oldText":"f","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[65,23],[65,23]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"shiftjis","filePath":"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572/LAMP環境セットアップ手順.txt","digestWhenLastPersisted":"f185afc56afb7d712c14f90a8e927601f6902495","preferredLineEnding":null,"nextMarkerId":367,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":4,"softTabs":false,"firstVisibleScreenRow":21,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":5,"softWrapped":true,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572/LAMP環境セットアップ手順.txt","bufferId":"47141b095d0a3888ad47e6849b50f8d9","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572/LAMP環境セットアップ手順.txt","focused":false,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-text","language-hyperlink","language-todo"],"destroyedItemURIs":[]},"packageStates":{"term3":{"termViews":[]},"fuzzy-finder":{"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572/LAMP環境セットアップ手順.txt":1459498062794},"metrics":{"sessionLength":1693663},"tree-view":{"directoryExpansionStates":{"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572":{"isExpanded":true,"entries":{}}},"selectedPath":"/Users/nori.k/Library/Containers/com.apple.mail/Data/Library/Mail Downloads/6455F1C4-4B77-49FA-BE80-297F55448572/LAMP環境セットアップ手順.txt","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}},"fullScreen":true}